{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/chandra sekhar/Desktop/chandra sekhar imp/bc course/ineuron projects/farmer govt deploy folder/server/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/chandra sekhar/Desktop/chandra sekhar imp/bc course/ineuron projects/farmer govt deploy folder/server/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/chandra sekhar/Desktop/chandra sekhar imp/bc course/ineuron projects/farmer govt deploy folder/server/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import axios from\"axios\";import styles from\"../CSS/Crops.module.css\";import AddScheme from\"./AddScheme\";import{useParams,useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SchemesUserUI(){var _useParams=useParams(),userId=_useParams.userId;var _useState=useState(),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var history=useHistory();var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),toRender=_useState4[0],setToRender=_useState4[1];function reRender(){console.log(\"re Render fun called\");if(toRender==0)setToRender(1);else setToRender(0);}useEffect(function(){axios.get(\"/schemes\").then(function(result){setData(result.data);}).catch(function(err){console.log(err);console.log(\"error in axios scheme get\");});},[toRender]);function buttonHandler(_x){return _buttonHandler.apply(this,arguments);}function _buttonHandler(){_buttonHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:3002/\".concat(userId,\"/\").concat(id,\"/apply\")).then(function(result){if(result.data==true)history.push(\"/user/application/\".concat(userId));});case 2:case\"end\":return _context.stop();}}},_callee);}));return _buttonHandler.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:styles.cont,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Schemes\"}),data&&/*#__PURE__*/_jsx(\"div\",{children:data.map(function(x){return/*#__PURE__*/_jsx(\"table\",{className:styles.table,children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"td\",{children:x.name})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Launched On:\"}),/*#__PURE__*/_jsx(\"td\",{children:x.launchedOn})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Apply By\"}),/*#__PURE__*/_jsx(\"td\",{children:x.applyBy})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Beneficiaries:\"}),/*#__PURE__*/_jsx(\"td\",{children:x.beneficiaries})]}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:2,children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){buttonHandler(x._id);},children:\"Apply\"})})})]})},x._id);})})]});}export default SchemesUserUI;","map":{"version":3,"names":["useEffect","useState","axios","styles","AddScheme","useParams","useHistory","SchemesUserUI","userId","data","setData","history","toRender","setToRender","reRender","console","log","get","then","result","catch","err","buttonHandler","id","push","cont","map","x","table","name","launchedOn","applyBy","beneficiaries","_id"],"sources":["C:/Users/chandra sekhar/Desktop/chandra sekhar imp/bc course/ineuron projects/farmer govt deploy folder/server/client/src/components/SchemesUserUI.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport styles from \"../CSS/Crops.module.css\";\r\nimport AddScheme from \"./AddScheme\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nfunction SchemesUserUI() {\r\n  const { userId } = useParams();\r\n  const [data, setData] = useState();\r\n  const history = useHistory();\r\n  let [toRender, setToRender] = useState(0);\r\n  function reRender() {\r\n    console.log(\"re Render fun called\");\r\n    if (toRender == 0) setToRender(1);\r\n    else setToRender(0);\r\n  }\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"/schemes\")\r\n      .then((result) => {\r\n        setData(result.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        console.log(\"error in axios scheme get\");\r\n      });\r\n  }, [toRender]);\r\n\r\n  async function buttonHandler(id) {\r\n    await axios\r\n      .get(`http://localhost:3002/${userId}/${id}/apply`)\r\n      .then((result) => {\r\n        if (result.data == true) history.push(`/user/application/${userId}`);\r\n      });\r\n  }\r\n  return (\r\n    <div className={styles.cont}>\r\n      {/* <AddScheme ReRender={reRender} /> */}\r\n      <h1>Schemes</h1>\r\n      {data && (\r\n        <div>\r\n          {data.map((x) => (\r\n            <table key={x._id} className={styles.table}>\r\n              <tbody>\r\n                <tr>\r\n                  <td>Name:</td>\r\n                  <td>{x.name}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Launched On:</td>\r\n                  <td>{x.launchedOn}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Apply By</td>\r\n                  <td>{x.applyBy}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>Beneficiaries:</td>\r\n                  <td>{x.beneficiaries}</td>\r\n                </tr>\r\n                {/* <tr>\r\n                  <td>Status:</td>\r\n                  <td>{x.status}</td>\r\n                </tr> */}\r\n                <tr>\r\n                  <td colSpan={2}>\r\n                    <button\r\n                      onClick={() => {\r\n                        buttonHandler(x._id);\r\n                      }}\r\n                    >\r\n                      Apply\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SchemesUserUI;\r\n"],"mappings":"inBAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,OAAP,KAAmB,yBAAnB,CACA,MAAOC,UAAP,KAAsB,aAAtB,CACA,OAASC,SAAT,CAAoBC,UAApB,KAAsC,kBAAtC,C,wFAEA,QAASC,cAAT,EAAyB,CACvB,eAAmBF,SAAS,EAA5B,CAAQG,MAAR,YAAQA,MAAR,CACA,cAAwBP,QAAQ,EAAhC,wCAAOQ,IAAP,eAAaC,OAAb,eACA,GAAMC,QAAO,CAAGL,UAAU,EAA1B,CACA,eAA8BL,QAAQ,CAAC,CAAD,CAAtC,yCAAKW,QAAL,eAAeC,WAAf,eACA,QAASC,SAAT,EAAoB,CAClBC,OAAO,CAACC,GAAR,CAAY,sBAAZ,EACA,GAAIJ,QAAQ,EAAI,CAAhB,CAAmBC,WAAW,CAAC,CAAD,CAAX,CAAnB,IACKA,YAAW,CAAC,CAAD,CAAX,CACN,CACDb,SAAS,CAAC,UAAM,CACdE,KAAK,CACFe,GADH,CACO,UADP,EAEGC,IAFH,CAEQ,SAACC,MAAD,CAAY,CAChBT,OAAO,CAACS,MAAM,CAACV,IAAR,CAAP,CACD,CAJH,EAKGW,KALH,CAKS,SAACC,GAAD,CAAS,CACdN,OAAO,CAACC,GAAR,CAAYK,GAAZ,EACAN,OAAO,CAACC,GAAR,CAAY,2BAAZ,EACD,CARH,EASD,CAVQ,CAUN,CAACJ,QAAD,CAVM,CAAT,CAVuB,QAsBRU,cAtBQ,qJAsBvB,iBAA6BC,EAA7B,0IACQrB,MAAK,CACRe,GADG,iCAC0BT,MAD1B,aACoCe,EADpC,YAEHL,IAFG,CAEE,SAACC,MAAD,CAAY,CAChB,GAAIA,MAAM,CAACV,IAAP,EAAe,IAAnB,CAAyBE,OAAO,CAACa,IAAR,6BAAkChB,MAAlC,GAC1B,CAJG,CADR,uDAtBuB,gDA6BvB,mBACE,aAAK,SAAS,CAAEL,MAAM,CAACsB,IAAvB,wBAEE,+BAFF,CAGGhB,IAAI,eACH,qBACGA,IAAI,CAACiB,GAAL,CAAS,SAACC,CAAD,qBACR,cAAmB,SAAS,CAAExB,MAAM,CAACyB,KAArC,uBACE,sCACE,mCACE,6BADF,cAEE,oBAAKD,CAAC,CAACE,IAAP,EAFF,GADF,cAKE,mCACE,oCADF,cAEE,oBAAKF,CAAC,CAACG,UAAP,EAFF,GALF,cASE,mCACE,gCADF,cAEE,oBAAKH,CAAC,CAACI,OAAP,EAFF,GATF,cAaE,mCACE,sCADF,cAEE,oBAAKJ,CAAC,CAACK,aAAP,EAFF,GAbF,cAqBE,iCACE,WAAI,OAAO,CAAE,CAAb,uBACE,eACE,OAAO,CAAE,kBAAM,CACbV,aAAa,CAACK,CAAC,CAACM,GAAH,CAAb,CACD,CAHH,mBADF,EADF,EArBF,GADF,EAAYN,CAAC,CAACM,GAAd,CADQ,EAAT,CADH,EAJJ,GADF,CA+CD,CAED,cAAe1B,cAAf"},"metadata":{},"sourceType":"module"}